{% load static %}
<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8" />
      <meta name="keywords"
            content="books, bookstore, reading, literature, GreenBook, online bookshop" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <meta name="description"
            content="GreenBook - Your friendly neighborhood bookstore offering a wide selection of books" />
      <title>
         {% block title %}GreenBook Bookstore{% endblock %}
      </title>

      <!-- Bootstrap CSS -->
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
            crossorigin="anonymous" />

      <!-- Font Awesome -->
      <link rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.1/css/all.min.css" />

      <!-- Styles -->
      <link rel="stylesheet" href="{% static 'css/styles.css' %}" />

      <style>
         :root {
            --bg-color: #fff;
            --text-color: #000;
            --card-bg: #fff;
            --border-color: #dee2e6;
            --btn-bg: #fff;
            --btn-border: #dee2e6;
            --btn-text: #000;
            --btn-hover-bg: #f8f9fa;
            --btn-hover-border: #d3d9df;
            --btn-active-bg: #e9ecef;
            --btn-active-border: #d3d9df;
         }

         [data-theme="dark"] {
            --bg-color: #212529;
            --text-color: #f8f9fa;
            --card-bg: #2c3034;
            --border-color: #495057;
            --btn-bg: #2c3034;
            --btn-border: #495057;
            --btn-text: #f8f9fa;
            --btn-hover-bg: #343a40;
            --btn-hover-border: #6c757d;
            --btn-active-bg: #495057;
            --btn-active-border: #6c757d;
         }

         body {
            background-color: var(--bg-color);
            color: var(--text-color);
            transition: background-color 0.3s, color 0.3s;
         }

         .card {
            background-color: var(--card-bg);
            border-color: var(--border-color);
         }

         .table {
            color: var(--text-color);
         }

         .table thead th {
            background-color: var(--card-bg);
            color: var(--text-color);
            border-color: var(--border-color);
         }

         .table td {
            background-color: var(--card-bg);
            border-color: var(--border-color);
         }

         .text-muted {
            color: var(--text-color) !important;
            opacity: 0.7;
         }

         h1, h2, h3, h4, h5, h6 {
            color: var(--text-color);
         }

         .btn-outline-dark {
            color: var(--btn-text);
            border-color: var(--btn-border);
            background-color: var(--btn-bg);
         }

         .btn-outline-dark:hover {
            color: var(--btn-text);
            background-color: var(--btn-hover-bg);
            border-color: var(--btn-hover-border);
         }

         .btn-outline-dark:active,
         .btn-outline-dark.active {
            color: var(--btn-text);
            background-color: var(--btn-active-bg);
            border-color: var(--btn-active-border);
         }

         .border {
            border-color: var(--border-color) !important;
         }

         .cart-icon {
            color: var(--text-color);
         }

         .cart-count {
            background-color: var(--btn-bg);
            color: var(--btn-text);
            border-color: var(--btn-border);
         }

         .cart-text {
            color: var(--text-color);
         }

         .dark-mode-toggle {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--card-bg);
            border: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            transition: all 0.3s;
         }

         .dark-mode-toggle:hover {
            transform: scale(1.1);
         }

         .dark-mode-toggle i {
            color: var(--text-color);
            font-size: 1.2rem;
         }
      </style>
      {% block extra_css %}{% endblock %}
   </head>
   <body>
      <!-- Navbar -->
      {% include "snippets/navbar.html" %}

      <!-- Content -->
      <div class="container py-4">
         {% block content %}
            <h1>This is base template</h1>
         {% endblock content %}
      </div>

      <div class="dark-mode-toggle" onclick="toggleDarkMode()">
         <i class="fas fa-moon"></i>
      </div>

      <!-- Bootstrap JS -->
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
              integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
              crossorigin="anonymous"></script>

      <script>
         // Check for saved theme preference
         const currentTheme = localStorage.getItem('theme') || 'light';
         document.documentElement.setAttribute('data-theme', currentTheme);

         function toggleDarkMode() {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'light' ? 'dark' : 'light';
            
            document.documentElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            
            // Update icon
            const icon = document.querySelector('.dark-mode-toggle i');
            icon.className = newTheme === 'dark' ? 'fas fa-sun' : 'fas fa-moon';
         }

         // Set initial icon
         document.addEventListener('DOMContentLoaded', () => {
            const icon = document.querySelector('.dark-mode-toggle i');
            icon.className = currentTheme === 'dark' ? 'fas fa-sun' : 'fas fa-moon';
         });
      </script>
      {% block extra_js %}{% endblock %}
   </body>
</html>
